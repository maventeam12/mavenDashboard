"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[958],{47619:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(30168),a=n(4942),i=n(1413),o=n(45987),s=n(92550),l=n(88564),c=n(83061),d=n(47313),u=n(70499),f=n(46417);var g=function(e){return(0,f.jsx)("div",{className:(0,c.Z)("FusePageCarded-header","container"),children:e.header&&e.header})},p=n(29439),h=n(46923),m=n(22202),v=n(60211),x=n(22408),b=n(19860),C=n(26159),Z=n(62201);var w=function(e){var t=(0,b.Z)(),n=(0,x.v9)((0,Z.lK)(t.palette.primary.main));return(0,f.jsxs)(s.Z,{enable:e.innerScroll,children:[e.header&&(0,f.jsx)(C.Z,{theme:n,children:(0,f.jsx)("div",{className:(0,c.Z)("FusePageCarded-sidebarHeader",e.variant,e.sidebarInner&&"FusePageCarded-sidebarHeaderInnerSidebar"),children:e.header})}),e.content&&(0,f.jsx)("div",{className:"FusePageCarded-sidebarContent",children:e.content})]})},y=(0,d.forwardRef)((function(e,t){var n=e.open,r=e.position,a=e.variant,o=(e.rootRef,(0,d.useState)(n)),s=(0,p.Z)(o,2),l=s[0],u=s[1];(0,d.useImperativeHandle)(t,(function(){return{toggleSidebar:g}}));var g=(0,d.useCallback)((function(e){u(e)}),[]);return(0,d.useEffect)((function(){g(n)}),[g,n]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{lgUp:"permanent"===a,children:(0,f.jsx)(v.Z,{variant:"temporary",anchor:r,open:l,onOpen:function(e){},onClose:function(){return null===e||void 0===e?void 0:e.onClose()},disableSwipeToOpen:!0,classes:{root:(0,c.Z)("FusePageCarded-sidebarWrapper",a),paper:(0,c.Z)("FusePageCarded-sidebar",a,"left"===r?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar")},ModalProps:{keepMounted:!0},BackdropProps:{classes:{root:"FusePageCarded-backdrop"}},style:{position:"absolute"},children:(0,f.jsx)(w,(0,i.Z)({},e))})}),"permanent"===a&&(0,f.jsx)(m.Z,{lgDown:!0,children:(0,f.jsx)(h.ZP,{variant:"permanent",anchor:r,className:(0,c.Z)("FusePageCarded-sidebarWrapper",a,l?"opened":"closed","left"===r?"FusePageCarded-leftSidebar":"FusePageCarded-rightSidebar"),open:l,onClose:null===e||void 0===e?void 0:e.onClose,classes:{paper:(0,c.Z)("FusePageCarded-sidebar",a)},children:(0,f.jsx)(w,(0,i.Z)({},e))})})]})}));y.defaultProps={open:!0};var S,P=y,k=["theme"],j=(0,l.ZP)("div")((function(e){var t=e.theme,n=(0,o.Z)(e,k);return{display:"flex",flexDirection:"column",minWidth:0,minHeight:"100%",position:"relative",flex:"1 1 auto",width:"100%",height:"auto",backgroundColor:t.palette.background.default,"& .FusePageCarded-scroll-content":{height:"100%"},"& .FusePageCarded-wrapper":(0,i.Z)({display:"flex",flexDirection:"row",flex:"1 1 auto",zIndex:2,maxWidth:"100%",minWidth:0,height:"100%",backgroundColor:t.palette.background.paper},"content"===n.scroll&&{position:"absolute",top:0,bottom:0,right:0,left:0,overflow:"hidden"}),"& .FusePageCarded-header":{display:"flex",flex:"0 0 auto"},"& .FusePageCarded-contentWrapper":{display:"flex",flexDirection:"column",flex:"1 1 auto",overflow:"auto",WebkitOverflowScrolling:"touch",zIndex:9999},"& .FusePageCarded-toolbar":{height:N,minHeight:N,display:"flex",alignItems:"center"},"& .FusePageCarded-content":{flex:"1 0 auto"},"& .FusePageCarded-sidebarWrapper":{overflow:"hidden",backgroundColor:"transparent",position:"absolute","&.permanent":(0,a.Z)({},t.breakpoints.up("lg"),{position:"relative",marginLeft:0,marginRight:0,transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),"&.closed":{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),"&.FusePageCarded-leftSidebar":{marginLeft:-n.leftsidebarwidth},"&.FusePageCarded-rightSidebar":{marginRight:-n.rightsidebarwidth}}})},"& .FusePageCarded-sidebar":{position:"absolute",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,"&.permanent":(0,a.Z)({},t.breakpoints.up("lg"),{position:"relative"}),maxWidth:"100%",height:"100%"},"& .FusePageCarded-leftSidebar":(0,a.Z)({width:n.leftsidebarwidth},t.breakpoints.up("lg"),{}),"& .FusePageCarded-rightSidebar":(0,a.Z)({width:n.rightsidebarwidth},t.breakpoints.up("lg"),{}),"& .FusePageCarded-sidebarHeader":{height:F,minHeight:F,backgroundColor:t.palette.primary.dark,color:t.palette.primary.contrastText},"& .FusePageCarded-sidebarHeaderInnerSidebar":{backgroundColor:"transparent",color:"inherit",height:"auto",minHeight:"auto"},"& .FusePageCarded-sidebarContent":{display:"flex",flexDirection:"column",minHeight:"100%"},"& .FusePageCarded-backdrop":{position:"absolute"}}})),F=120,N=64,I=(0,d.forwardRef)((function(e,t){var n=(0,d.useRef)(null),r=(0,d.useRef)(null),a=(0,d.useRef)(null);return(0,d.useImperativeHandle)(t,(function(){return{rootRef:a,toggleLeftSidebar:function(e){n.current.toggleSidebar(e)},toggleRightSidebar:function(e){r.current.toggleSidebar(e)}}})),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z,{styles:function(t){return(0,i.Z)((0,i.Z)({},"page"!==e.scroll&&{"#fuse-toolbar":{position:"static"},"#fuse-footer":{position:"static"}}),"page"===e.scroll&&{"#fuse-toolbar":{position:"sticky",top:0},"#fuse-footer":{position:"sticky",bottom:0}})}}),(0,f.jsxs)(j,{className:(0,c.Z)("FusePageCarded-root","FusePageCarded-scroll-".concat(e.scroll),e.className),ref:a,scroll:e.scroll,leftsidebarwidth:e.leftSidebarWidth,rightsidebarwidth:e.rightSidebarWidth,children:[e.header&&(0,f.jsx)(g,{header:e.header}),(0,f.jsx)("div",{className:"flex flex-auto flex-col container z-10 h-full shadow-1 rounded-t-16 relative overflow-hidden",children:(0,f.jsxs)("div",{className:"FusePageCarded-wrapper",children:[e.leftSidebarContent&&(0,f.jsx)(P,{position:"left",content:e.leftSidebarContent,variant:e.leftSidebarVariant||"permanent",ref:n,rootRef:a,open:e.leftSidebarOpen,onClose:e.leftSidebarOnClose}),(0,f.jsx)(s.Z,{className:"FusePageCarded-contentWrapper",enable:"content"===e.scroll,children:e.content&&(0,f.jsx)("div",{className:(0,c.Z)("FusePageCarded-content"),children:e.content})}),e.rightSidebarContent&&(0,f.jsx)(P,{position:"right",content:e.rightSidebarContent,variant:e.rightSidebarVariant||"permanent",ref:r,rootRef:a,open:e.rightSidebarOpen,onClose:e.rightSidebarOnClose})]})})]})]})}));I.defaultProps={classes:{},scroll:"page",leftSidebarOpen:!1,rightSidebarOpen:!1,rightSidebarWidth:240,leftSidebarWidth:240};var D=(0,d.memo)((0,l.ZP)(I)(S||(S=(0,r.Z)([""]))))},45958:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(47619),a=n(23132),i=n(38768),o=n(20372),s=n(42461),l=n(82295),c=n(61113),d=n(81056),u=n(22408),f=n(70492),g=n(71064),p=n(46417);var h=function(e){var t=(0,u.I0)(),n=(0,u.v9)(g.LG);return(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 flex-1 w-full items-center justify-between py-32 px-24 md:px-32",children:[(0,p.jsx)(c.Z,{component:d.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,style:{color:"#f4b231"},className:"text-24 md:text-32 font-extrabold tracking-tight",children:"Contracts"}),(0,p.jsx)("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row space-y-16 sm:space-y-0 flex-1 items-center justify-end space-x-8",children:(0,p.jsxs)(l.Z,{component:d.E.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex items-center w-full sm:max-w-256 space-x-8 px-16 rounded-full border-1 shadow-0",children:[(0,p.jsx)(f.Z,{color:"disabled",children:"heroicons-solid:search"}),(0,p.jsx)(s.Z,{placeholder:"Search contract",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n,inputProps:{"aria-label":"Search"},onChange:function(e){return t((0,g.gd)(e))}})]})})]})},m=n(29439),v=n(92550),x=n(58970),b=n(66835),C=n(57861),Z=n(67478),w=n(62323),y=n(24076),S=n(47313),P=n(8139),k=n(63738),j=n(58631),F=n(82558),N=n(61689),I=n(23477),D=n(17551),M=[{id:"id",align:"center",disablePadding:!1,label:"ID",sort:!0},{id:"linkToDrive",align:"center",disablePadding:!1,label:"Drive link",sort:!0},{id:"startDate",align:"center",disablePadding:!1,label:"Start Date",sort:!0},{id:"endDate",align:"center",disablePadding:!1,label:"End Date",sort:!0}];var T=function(e){return(0,p.jsx)(I.Z,{children:(0,p.jsx)(y.Z,{className:"h-48 sm:h-64",children:M.map((function(t){return(0,p.jsx)(Z.Z,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,D.$n)(e.palette.background.default,.4):(0,D.$n)(e.palette.background.default,.02)}},className:"p-4 md:p-16",align:t.align,padding:t.disablePadding?"none":"normal",sortDirection:e.order.id===t.id&&e.order.direction,children:t.sort&&(0,p.jsx)(N.Z,{title:"Sort",style:{color:"#f4b231"},placement:"right"===t.align?"bottom-end":"bottom-start",enterDelay:300,children:(0,p.jsx)(F.Z,{active:e.order.id===t.id,direction:e.order.direction,onClick:(n=t.id,function(t){e.onRequestSort(t,n)}),className:"font-semibold",style:{color:"#f4b231"},children:t.label})})},t.id);var n}),this)})})};var R=(0,P.Z)((function(e){var t=(0,u.I0)(),n=(0,u.v9)(g.f5),r=(0,u.v9)(g.LG),a=(0,u.v9)(j.dy),i=(0,S.useState)(!0),o=(0,m.Z)(i,2),s=o[0],l=o[1],f=(0,S.useState)([]),h=(0,m.Z)(f,2),P=h[0],F=h[1],N=(0,S.useState)(n),I=(0,m.Z)(N,2),D=I[0],M=I[1],R=(0,S.useState)(0),A=(0,m.Z)(R,2),W=A[0],H=A[1],_=(0,S.useState)(10),O=(0,m.Z)(_,2),B=O[0],L=O[1],E=(0,S.useState)({direction:"asc",id:null}),q=(0,m.Z)(E,2),G=q[0],z=q[1];return(0,S.useEffect)((function(){var e,n;console.log(a.email,a.id,a.username,window.localStorage.getItem("access_token"),"-------------",null===a||void 0===a?void 0:a.email,null===a||void 0===a?void 0:a.id,null===a||void 0===a?void 0:a.username,null===(e=window)||void 0===e||null===(n=e.localStorage)||void 0===n?void 0:n.getItem("access_token")),t((0,g.Kf)({access_token:window.localStorage.getItem("access_token"),email:a.email,id:a.id,username:a.username})).then((function(){l(!1)}))}),[t,a.username,a.id,a.email]),(0,S.useEffect)((function(){0!==(null===r||void 0===r?void 0:r.length)?(M(x.Z.filter(n,(function(e){return e.id.toString().toLowerCase().includes(null===r||void 0===r?void 0:r.toLowerCase())}))),H(0)):M(n)}),[n,r]),s?(0,p.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,p.jsx)(k.Z,{})}):0===(null===D||void 0===D?void 0:D.length)||void 0===D?(0,p.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:(0,p.jsx)(c.Z,{color:"text.secondary",variant:"h5",children:"There are no Contracts!"})}):(0,p.jsxs)("div",{className:"w-full flex flex-col min-h-full",children:[(0,p.jsx)(v.Z,{className:"grow overflow-x-auto",children:(0,p.jsxs)(b.Z,{stickyHeader:!0,className:"min-w-xl","aria-labelledby":"tableTitle",children:[(0,p.jsx)(T,{selectedContractsIds:P,order:G,onSelectAllClick:function(e){e.target.checked?F(null===D||void 0===D?void 0:D.map((function(e){return null===e||void 0===e?void 0:e.id}))):F([])},onRequestSort:function(e,t){var n=t,r="desc";G.id===t&&"desc"===G.direction&&(r="asc"),z({direction:r,id:n})},rowCount:null===D||void 0===D?void 0:D.length,onMenuItemClick:function(){F([])}}),(0,p.jsx)(C.Z,{children:x.Z.orderBy(D,[function(e){return"id"===G.id?e.id:e[G.id]}],[G.direction]).slice(W*B,W*B+B).map((function(t){var n,r,a=-1!==P.indexOf(t.id);return(0,p.jsxs)(y.Z,{className:"h-72 cursor-pointer",hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,onClick:function(n){return r=t,void e.navigate("/clientContract/contracts/".concat(r.id));var r},children:[(0,p.jsx)(Z.Z,{className:"p-4 md:p-16",component:"th",scope:"row",align:"center",children:null===t||void 0===t?void 0:t.id}),(0,p.jsx)(Z.Z,{className:"p-4 md:p-16",component:"th",scope:"row",align:"center",children:(null===t||void 0===t||null===(n=t.linkToDrive)||void 0===n?void 0:n.length)>30?"".concat(null===t||void 0===t||null===(r=t.linkToDrive)||void 0===r?void 0:r.slice(0,30),"..."):"".concat(null===t||void 0===t?void 0:t.linkToDrive)}),(0,p.jsx)(Z.Z,{className:"p-4 md:p-16",component:"th",scope:"row",align:"center",children:null===t||void 0===t?void 0:t.startDate}),(0,p.jsx)(Z.Z,{className:"p-4 md:p-16",component:"th",scope:"row",align:"center",children:null===t||void 0===t?void 0:t.endDate})]},null===t||void 0===t?void 0:t.id)}))})]})}),(0,p.jsx)(w.Z,{className:"shrink-0 border-t-1",component:"div",count:null===D||void 0===D?void 0:D.length,rowsPerPage:B,page:W,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onPageChange:function(e,t){H(t)},onRowsPerPageChange:function(e){L(e.target.value)}})]})}));var A=(0,a.Z)("clientContract",o.Z)((function(){var e=(0,i.Z)((function(e){return e.breakpoints.down("lg")}));return(0,p.jsx)(r.Z,{header:(0,p.jsx)(h,{}),content:(0,p.jsx)(R,{}),scroll:e?"normal":"content"})}))},348:function(e,t,n){n.d(t,{GZ:function(){return p},Vx:function(){return m},sn:function(){return v},v7:function(){return u}});var r=n(4942),a=n(15861),i=n(64687),o=n.n(i),s=n(80827),l=n(31881),c=n.n(l),d=n(31387),u=(0,s.hg)("clientContract/clientMessages/getClientMessages",function(){var e=(0,a.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://www.api.mavenevents.ae/api/clientMessage/client/".concat(t.id),{headers:{access_token:t.access_token,email:t.email,username:t.username,id:t.id}});case 2:if(n=e.sent,Array.isArray(n.data.error))for(r=0;r<n.data.error.length;r++)d.Am.error(n.data.error[r].msg.message,{position:"bottom-right",draggable:!1});return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=(0,s.HF)({selectId:function(e){return e.id},selectAll:function(e){return e},selectById:function(e){return e.id},removeMany:function(e){return e.id}}),g=f.getSelectors((function(e){return e.clientContract.clientMessages})),p=g.selectAll,h=(g.selectById,(0,s.oM)({name:"clientContract/clientMessages",initialState:f.getInitialState({searchText:""}),reducers:{setClientMessagesSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(0,r.Z)({},u.fulfilled,f.setAll)})),m=h.actions.setClientMessagesSearchText,v=function(e){return e.clientContract.clientMessages.searchText};t.ZP=h.reducer},23920:function(e,t,n){n.d(t,{ZP:function(){return b},uN:function(){return g},pn:function(){return m},w2:function(){return v},ao:function(){return x}});var r=n(4942),a=n(15861),i=n(64687),o=n.n(i),s=n(80827),l=n(31881),c=n.n(l),d=n(31387),u=n(58970),f=function(e){return u.Z.defaults(e||{},{id:"",startDate:"",endDate:"",linkToDrive:"",clientId:"",details:[{contractId:"",serviceName:"",quantity:"",delivered:"",extra:"",month:""}],services:[{contractId:"",serviceName:"",quantity:"",isActive:""}],servicesMonth:[{contractId:"",serviceName:"",quantity:"",month:""}],contractMsg:[{contractId:"",message:"",urgent:""}]})},g=(0,s.hg)("clientContract/contract/getContract",function(){var e=(0,a.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://www.api.mavenevents.ae/api/contract/months/".concat(t.contractId),{headers:{access_token:t.access_token,email:t.email,username:t.username,id:t.id}});case 2:if(n=e.sent,!Array.isArray(n.data.error)){e.next=6;break}for(r=0;r<n.data.error.length;r++)d.Am.error(n.data.error[r].msg.message,{position:"bottom-right",draggable:!1});return e.abrupt("return",null);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=(0,s.oM)({name:"clientContract/contract",initialState:null,reducers:{resetContract:function(){return null},newContract:function(e,t){return f()}},extraReducers:(0,r.Z)({},g.fulfilled,(function(e,t){return t.payload}))}),h=p.actions,m=h.newContract,v=h.resetContract,x=function(e){return e.clientContract.contract},b=p.reducer},71064:function(e,t,n){n.d(t,{Kf:function(){return u},LG:function(){return v},f5:function(){return p},gd:function(){return m}});var r=n(4942),a=n(15861),i=n(64687),o=n.n(i),s=n(80827),l=n(31881),c=n.n(l),d=n(31387),u=(0,s.hg)("clientContract/contracts/getContracts",function(){var e=(0,a.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("https://www.api.mavenevents.ae/api/contract/client/".concat(t.id),{headers:{access_token:t.access_token,email:t.email,username:t.username,id:t.id}});case 2:if(n=e.sent,Array.isArray(n.data.error))for(r=0;r<n.data.error.length;r++)d.Am.error(n.data.error[r].msg.message,{position:"bottom-right",draggable:!1});return e.next=6,n.data;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=(0,s.HF)({selectId:function(e){return e.id},selectAll:function(e){return e},selectById:function(e){return e.id},removeMany:function(e){return e.id}}),g=f.getSelectors((function(e){return e.clientContract.contracts})),p=g.selectAll,h=(g.selectById,(0,s.oM)({name:"clientContract/contracts",initialState:f.getInitialState({searchText:""}),reducers:{setContractsSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(0,r.Z)({},u.fulfilled,f.setAll)})),m=h.actions.setContractsSearchText,v=function(e){return e.clientContract.contracts.searchText};t.ZP=h.reducer},20372:function(e,t,n){var r=n(9038),a=n(348),i=n(71064),o=n(23920),s=(0,r.UY)({clientMessages:a.ZP,contracts:i.ZP,contract:o.ZP});t.Z=s},23132:function(e,t,n){var r=n(1413),a=n(19602),i=n(46417);t.Z=function(e,t){return function(n){return(0,a.f)(e,t),function(e){return(0,i.jsx)(n,(0,r.Z)({},e))}}}}}]);